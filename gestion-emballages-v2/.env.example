# Blue Whale Portal Environment Configuration Template
# Copy this file to .env and update the values for your environment
#
# Usage with Docker Compose:
# - docker-compose.local.yml: Infrastructure only (PostgreSQL, Redis, MinIO)
# - docker-compose.dev.yml: Full stack development environment
# - docker-compose.prod.yml: Production deployment
#
# For local development: docker-compose -f docker-compose.local.yml up -d
# Then run: cd backend && npm run start:dev && cd frontend && npm start

# =================
# Application Settings
# =================
NODE_ENV=development
PORT=3000
API_PREFIX=api
API_VERSION=v1

# =================
# Security Settings
# =================
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_EXPIRES_IN=1d

# =================
# Database Configuration
# =================
DB_TYPE=postgres
DB_HOST=localhost
DB_PORT=5432
DB_USERNAME=dev_user
DB_PASSWORD=dev_password
DB_DATABASE=blue_whale_portal_dev
DB_SYNCHRONIZE=true
DB_LOGGING=true

# Database SSL (for production)
DB_SSL=false
DB_SSL_REJECT_UNAUTHORIZED=true

# =================
# Redis Configuration
# =================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# =================
# MinIO Configuration
# =================
MINIO_ENDPOINT=localhost
MINIO_PORT=9000
MINIO_ACCESS_KEY=devuser
MINIO_SECRET_KEY=devpassword123
MINIO_BUCKET_NAME=blue-whale-portal-dev
MINIO_USE_SSL=false

# =================
# CORS Configuration
# =================
CORS_ORIGIN=http://localhost:4200
CORS_CREDENTIALS=true

# =================
# File Upload Configuration
# =================
MAX_FILE_SIZE=10485760
ALLOWED_FILE_TYPES=jpg,jpeg,png,pdf,doc,docx,xls,xlsx

# Upload directories
UPLOADS_DIR=./uploads
TEMP_DIR=./temp

# =================
# Email Configuration (if needed)
# =================
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@example.com
SMTP_PASS=your-email-password
EMAIL_FROM=noreply@blue-whale-portal.com

# =================
# Logging Configuration
# =================
LOG_LEVEL=info
LOG_FILE=./logs/application.log
LOG_MAX_SIZE=10m
LOG_MAX_FILES=5

# =================
# Rate Limiting
# =================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# =================
# Session Configuration
# =================
SESSION_SECRET=your-session-secret-change-this
SESSION_MAX_AGE=86400000

# =================
# Frontend Configuration
# =================
FRONTEND_URL=http://localhost:4200

# =================
# Health Check Configuration
# =================
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_DATABASE=true
HEALTH_CHECK_REDIS=true
HEALTH_CHECK_MINIO=true

# =================
# Production Settings
# =================
# Uncomment and configure for production

# SSL Configuration
# SSL_KEY_PATH=/path/to/ssl/key.pem
# SSL_CERT_PATH=/path/to/ssl/cert.pem

# Security Headers
# SECURITY_HSTS_MAX_AGE=31536000
# SECURITY_HSTS_INCLUDE_SUBDOMAINS=true
# SECURITY_CONTENT_SECURITY_POLICY=default-src 'self'

# Monitoring
# SENTRY_DSN=your-sentry-dsn
# NEW_RELIC_LICENSE_KEY=your-newrelic-key

# =================
# Docker Compose Settings
# =================
# These variables are used by Docker Compose files
# For docker-compose.local.yml (infrastructure only)

# PostgreSQL (Docker Compose)
POSTGRES_DB=blue_whale_portal_dev
POSTGRES_USER=dev_user
POSTGRES_PASSWORD=dev_password
POSTGRES_PORT=5432

# Redis (Docker Compose)
REDIS_PORT=6379

# MinIO (Docker Compose)
MINIO_ROOT_USER=devuser
MINIO_ROOT_PASSWORD=devpassword123
MINIO_API_PORT=9000
MINIO_CONSOLE_PORT=9001

# Development Tools (Docker Compose)
ADMINER_PORT=8080
MAILHOG_SMTP_PORT=1025
MAILHOG_WEB_PORT=8025
REDIS_COMMANDER_PORT=8081

# Network settings
DOCKER_NETWORK=blue-whale-portal-network

# Volume settings (for production bind mounts)
POSTGRES_DATA_PATH=./docker/data/postgres
REDIS_DATA_PATH=./docker/data/redis
MINIO_DATA_PATH=./docker/data/minio

# Service host names (when running in Docker)
DOCKER_DB_HOST=postgres
DOCKER_REDIS_HOST=redis
DOCKER_MINIO_HOST=minio

# =================
# Development Settings
# =================
# Hot reload
HOT_RELOAD=true

# Debug mode
DEBUG=true

# API Documentation
SWAGGER_ENABLED=true
SWAGGER_PATH=api-docs

# Development database seeding
SEED_DATABASE=false
SEED_ADMIN_EMAIL=admin@blue-whale-portal.com
SEED_ADMIN_PASSWORD=admin123

# =================
# Testing Configuration
# =================
TEST_DATABASE_URL=postgresql://postgres:postgres@localhost:5433/blue_whale_portal_test
TEST_REDIS_URL=redis://localhost:6380
TEST_TIMEOUT=30000

# =================
# Backup Configuration
# =================
BACKUP_ENABLED=false
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=blue-whale-portal-backups
BACKUP_S3_REGION=us-east-1

# =================
# Performance Settings
# =================
# Cache TTL (seconds)
CACHE_TTL=3600

# Query timeout (milliseconds)
QUERY_TIMEOUT=30000

# Connection pool settings
DB_CONNECTION_LIMIT=20
DB_CONNECTION_TIMEOUT=60000